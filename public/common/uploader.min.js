                              
function   upload(field){						   
		   document.getElementById(field).onchange = function(event){  
					var img = event.target.files[0];  
					if(!img){  
						return ;  
					}  
					if(!(img.type.indexOf('image')==0 && img.type && /\.(?:jpg|png|gif)$/.test(img.name)) ){  
						alert('图片只能是jpg,gif,png');  
						return ;  
					}  
					var reader = new FileReader();  
					reader.readAsDataURL(img);  
					reader.onload = function(e){
						$.ajax({
						   type: "POST",
						   url: upload_url,
						   data:{ img: e.target.result},
						   beforeSend:function(msg){
							  $("#"+field).parents(".uploader").find(".uploader-files").text("上传中");
						   },
						   success: function(data){
							    if(data){  
								   $("input[name='"+field+"']").val(data.id);
								   $('.uploader_preview').html(
											'<div class="uploader-pre-item"><img src="' +data.src + '"/></div>'
								   ); 
								   $("#"+field).parents(".uploader").find(".uploader-files").text("上传图片"); 
								  }else{  
									 alert('upload fail');  
								  }  
						   }
						});

				   } 
		}  
}
 function   uploads(field){						   
		   document.getElementById(field).onchange = function(event){  
					var img = event.target.files[0];  
					if(!img){  
						return ;  
					}  
					if(!(img.type.indexOf('image')==0 && img.type && /\.(?:jpg|png|gif)$/.test(img.name)) ){  
						alert('图片只能是jpg,gif,png');  
						return ;  
					}  
					var reader = new FileReader();  
					reader.readAsDataURL(img);  
					reader.onload = function(e){
						$.ajax({
						   type: "POST",
						   url: upload_url,
						   data:{ img: e.target.result},
						   beforeSend:function(msg){
							  $("#"+field).parents(".uploader").find(".uploader-files").text("上传中...");
						   },
						   success: function(data){
							      if(data){  
                                    var html = "<div class='upload-pre-item'><img src='" +data.src +"' data-id="+data.id+"> <span class='close' onclick='delimage(this,"+field+");'></span></div>";
							            $("#"+field).parents(".form-group").find(".uploader_preview").append(html);
                                        setinput(field);  
									    $("#"+field).parents(".uploader").find(".uploader-files").text("上传图片"); 
								  }else{  
									alert('upload fail');  
								  }   
						      }
						});

				   } 
		}  
}
  function delimage(obj){ //删除
            $(obj).parents(".upload-pre-item").remove();
		    setinput(field);
}
 function setinput(field){ //取值
		    var option =$("#"+field).parents(".form-group").find(".uploader_preview img");
		    var result=new Array();
		    option.each(function(i){
		 	     result.push($(this).attr('data-id'));
		   });
           var ids= result.join(',');
            $("input[name='"+field+"']").val(ids);
}